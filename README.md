# Light Field Toolbox for MATLAB

Copyright (c) 2013-2020 Donald G. Dansereau

This is a toolbox for working with light field imagery in MATLAB. Features include decoding, calibration, rectification, filtering, and visualization of light field images.

The toolbox is under active development. The most recent release and development versions are here:
[https://github.com/doda42/LFToolbox](https://github.com/doda42/LFToolbox)

## Installation and Sample Data
Please refer to LFToolbox.pdf for installation and usage instructions. 

Sample data:

* [LFToolbox v0.3 Sample Pack 1](http://www-personal.acfr.usyd.edu.au/ddan1654/LFToolbox0.3_Samples1.zip)
* [Small Sample Calibration](http://www-personal.acfr.usyd.edu.au/ddan1654/PlenCalSmallExample.zip)
* Additional datasets and community links at [dgd.vision](http://dgd.vision/Tools/LFToolbox)

The complementary LiFF light field feature toolbox is here: [http://dgd.vision/Tools/LiFF](http://dgd.vision/Tools/LiFF)

## What's New / Development Plan
Release 0.5 contains usability and performance improvements, new display functions, ESLF file read and write, and linear super-resolution. Interface and default behaviour changes were kept to a minimum. See CHANGELOG.txt.

A major new release 1.0 is coming which will introduce changes to interface and default behaviours. Plans include improved decode and calibration, and support for a broader range of lenslet-based cameras.

## Compatibility
LFToolbox 0.5 was written in MATLAB 2020a, but may be compatible with earlier versions.

Users upgrading from earlier toolbox versions may need to re-run decoding and calibration and update some parameter names. See CHANGELOG.txt.

Much of the toolbox is camera-agnostic, e.g. filtering and display of light fields. Functions are also included for loading specific file formats, and for working with specific camera models.

**Light Field File Formats**
The toolbox can load gantry / array-style folders of images, ESLF files, and raw lenslet-based images.

**Plenoptic 1.0** cameras are supported through decoding, calibration, and rectification of imagery. Functions are most easily applied to Lytro imagery. The toolbox can also be applied to other lenslet-based Plenoptic 1.0 cameras, but this is not yet well documented. Calibration of Lytro Illum cameras is experimental.

**Plenoptic 2.0** cameras are not well supported. Use with some cameras is possible but not well documented. Multi-focal lenslet-based cameras like the Raytrix are not well supported.

**Lytro Software** 
The original Lytro camera and the Lytro Illum are supported under Lytro Desktop 4 and 3. The toolbox will also load ESLF files generated by Lytro Power Tools.

## Contributing / Feedback
Suggestions, bug reports, code improvements and new functionality are welcome -- email Donald.Dansereau+LFToolbox {at} gmail dot com.

## Branch Structure
* tags: keep track of each release
* master: always the most recent release
* develop<version #>: preparing a new release, to be merged into master when complete
* develop: experimental functionality

Code in the develop branches is incomplete, unstable, undocumented, and unsupported. Use at your own risk. Functions named LFX* are new/experimental and may not be included in the next release.


## Acknowledgements
Parts of the code were taken with permission from the Camera Calibration Toolbox for MATLAB by Jean-Yves Bouguet, with contributions from Pietro Perona and others; and from the JSONlab Toolbox by Qianqian Fang and others. LFFigure was originally by Daniel Eaton. The LFP reader is based in part on Nirav Patel and Doug Kelley's LFP readers. Thanks to Michael Tao for help and samples for decoding Illum imagery.

## Citing
The appropriate citations for decoding, calibration and rectification and the volumetric focus (hyperfan) filter are:

<pre>@inproceedings{dansereau2013decoding,
 title={Decoding, Calibration and Rectification for lenselet-Based Plenoptic Cameras},
 author={Donald G. Dansereau and Oscar Pizarro and Stefan B. Williams},
 booktitle={Computer Vision and Pattern Recognition (CVPR), IEEE Conference on},
 year={2013},
 month={Jun},
 organization={IEEE}
}</pre>

<pre>@article{dansereau2015linear, 
 title={Linear Volumetric Focus for Light Field Cameras},
 author={Donald G. Dansereau and Oscar Pizarro and Stefan B. Williams},
 journal={ACM Transactions on Graphics (TOG)},
 volume={34},
 number={2},
 month={Feb.},
 year={2015}
}</pre>

